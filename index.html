<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bsk Home Needs</title>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

<style>
body{margin:0;font-family:Arial;background:#f4f4f4}
.page{display:none}
.page.active{display:block}
header{background:linear-gradient(45deg,#4CAF50,#FF9800);color:#fff;padding:20px;text-align:center}
.container{padding:20px;padding-bottom:90px}
.products{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:15px}
.product-card{background:#fff;border-radius:10px;padding:15px;text-align:center;box-shadow:0 4px 10px rgba(0,0,0,.1)}
.product-card img{width:100%;height:180px;object-fit:cover;border-radius:8px}
button{border:none;padding:8px 15px;border-radius:20px;background:#4CAF50;color:#fff;margin:5px;cursor:pointer}
button:hover{opacity:.9}
.remove-btn{background:#f44336}
footer{position:fixed;bottom:0;width:100%;background:#333;display:flex;justify-content:space-around;padding:10px}
footer button{background:none;color:#fff;font-size:20px}
.scroll-box{max-height:250px;overflow-y:auto;border:1px solid #ccc;padding:10px}
.search-bar{text-align:center;margin-bottom:15px}
.search-bar input{padding:8px;width:280px;border-radius:20px;border:1px solid #ccc}
.no-results{color:red;text-align:center;display:none}
.cart-item{display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #ddd;padding:5px}
</style>
</head>

<body>

<!-- HOME -->
<div id="homePage" class="page active">
<header>
<h1><i class="fas fa-truck"></i> Bsk Home Needs</h1>
<p>Fast Home Delivery</p>
</header>

<div class="container">
<div class="search-bar">
<input id="searchInput" placeholder="Search products">
</div>

<div class="products" id="productsList"></div>
<div id="noResults" class="no-results">Product not found</div>
</div>
</div>

<!-- CART -->
<div id="cartPage" class="page">
<div class="container">
<h2>Your Cart</h2>
<div id="cartItems"></div>
<p>Total: ‚Çπ<span id="cartTotal">0</span></p>
<button onclick="checkout()">Checkout</button>
<button onclick="showPage('homePage')">Back</button>
</div>
</div>

<!-- ADMIN -->
<div id="adminPage" class="page">
<div class="container">
<h2>Admin Panel</h2>
<button onclick="adminLogin()">Login</button>

<div id="adminPanel" style="display:none">
<h3>Products</h3>
<div id="adminProductList" class="scroll-box"></div>

<h3>Orders (Latest First)</h3>
<div id="adminOrderList" class="scroll-box"></div>
</div>

<button onclick="showPage('homePage')">Back</button>
</div>
</div>

<footer>
<button onclick="showPage('homePage')">üè†</button>
<button onclick="showPage('cartPage')">üõí</button>
<button onclick="showPage('adminPage')">üë§</button>
</footer>

<script>
let products=JSON.parse(localStorage.getItem("products"))||[];
let cart=JSON.parse(localStorage.getItem("cart"))||[];
let orders=JSON.parse(localStorage.getItem("orders"))||[];

function showPage(id){
document.querySelectorAll(".page").forEach(p=>p.classList.remove("active"));
document.getElementById(id).classList.add("active");
}

function renderProducts(filter=""){
let list=document.getElementById("productsList");
let noRes=document.getElementById("noResults");
list.innerHTML="";
let f=products.filter(p=>p.name.toLowerCase().includes(filter.toLowerCase()));
if(f.length===0){noRes.style.display="block";return}else noRes.style.display="none";

f.forEach((p,i)=>{
let d=document.createElement("div");
d.className="product-card";
d.innerHTML=`
<img src="${p.image}" onerror="this.src='https://via.placeholder.com/200'">
<h3>${p.name}</h3>
<p>${p.desc}</p>
<p>‚Çπ${p.price+p.delivery}</p>
<button onclick="addToCart(${i})">Add to Cart</button>
<button onclick="buyNow(${i})">Order Now</button>`;
list.appendChild(d);
});
}

function addToCart(i){
let p=products[i];
let f=cart.find(c=>c.name===p.name);
if(f)f.qty++;
else cart.push({name:p.name,price:p.price+p.delivery,qty:1});
localStorage.setItem("cart",JSON.stringify(cart));
alert("Added to cart");
}

function buyNow(i){
let p=products[i];
let name=prompt("Name");
let address=prompt("Address");
let phone=prompt("Mobile (10 digit)");

if(!/^[0-9]{10}$/.test(phone)){
alert("Invalid mobile number");
return;
}

orders.unshift({
product:p.name,
quantity:1,
total:p.price+p.delivery,
name,address,phone
});

localStorage.setItem("orders",JSON.stringify(orders));
alert("Order placed");
}

function renderCart(){
let list=document.getElementById("cartItems");
list.innerHTML="";
let total=0;
cart.forEach((c,i)=>{
let t=c.price*c.qty;
total+=t;
list.innerHTML+=`
<div class="cart-item">
${c.name} x${c.qty} = ‚Çπ${t}
<button class="remove-btn" onclick="removeCart(${i})">X</button>
</div>`;
});
document.getElementById("cartTotal").innerText=total;
localStorage.setItem("cart",JSON.stringify(cart));
}

function removeCart(i){
cart.splice(i,1);
renderCart();
}

function checkout(){
if(cart.length===0)return alert("Cart empty");
let name=prompt("Name");
let address=prompt("Address");
let phone=prompt("Mobile (10 digit)");

if(!/^[0-9]{10}$/.test(phone)){
alert("Invalid mobile number");
return;
}

cart.forEach(c=>{
orders.unshift({
product:c.name,
quantity:c.qty,
total:c.price*c.qty,
name,address,phone
});
});

cart=[];
localStorage.setItem("cart",JSON.stringify(cart));
localStorage.setItem("orders",JSON.stringify(orders));
renderCart();
alert("Order placed");
}

function adminLogin(){
let p=prompt("Password");
if(p!=="Bhashkar business")return alert("Wrong password");
document.getElementById("adminPanel").style.display="block";
renderAdmin();
}

function renderAdmin(){
let pl=document.getElementById("adminProductList");
let ol=document.getElementById("adminOrderList");
pl.innerHTML="";ol.innerHTML="";

products.forEach(p=>{
pl.innerHTML+=`<div>${p.name}</div>`;
});

orders.forEach(o=>{
ol.innerHTML+=`
<div>
<b>${o.product}</b> x${o.quantity}<br>
‚Çπ${o.total}<br>
${o.name} | ${o.phone}
</div><hr>`;
});
}

document.getElementById("searchInput").addEventListener("input",e=>renderProducts(e.target.value));

renderProducts();
renderCart();
</script>

</body>
</html>
